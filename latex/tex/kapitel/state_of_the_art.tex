\chapter{State of the art}



\section{Videospiel-Markt}

Videospiele sind Bestandteil des Medienkonsums in Deutschland. Rund 6 von 10 Menschen in Deutschland spielen Computer- und Videospiele. Der deutsche Videospiel-Markt machte mit Videospiel-Hardware, Videospiel-Abo-Diensten und Videospielen im Jahr 2023 einen Umsatz von 9,97 Milliarden Euro. Dabei machten Videospiele und In-Game Käufe mit 5,845 Milliarden Euro einen Umsatz von ca. 59\% aus. Im Vorjahr 2022 entstand ein Umsatz von 9,432 Milliarden Euro, somit stieg der Umsatz von 2022 im Jahr 2023 um 6\%.  Zahlen für das Jahr 2024 sind noch nicht bekannt.

\begin{figure}[h]
  \centering
  \includegraphics[width=15cm]{state_of_the_art/deutscher_vs_markt}
	\captionsetup{justification=justified, format=plain}
  \caption{Wachstum des deutschen Videospielmarkts über die Jahre}
  \label{Deutscher Videospielmarkt}
\end{figure}

Auf der erfolgreichen Computerspiel Vertriebsplattform Steam von Valve wurden vergangenes Jahr 2023 14.324 Computerspiele veröffentlicht. Seit 2019 wächst die Veröffentlichung der Computerspiele auf Steam stetig.

\begin{figure}[h]
  \centering
  \includegraphics[width=15cm]{state_of_the_art/steam_veroffentlichungen}
	\captionsetup{justification=justified, format=plain}
  \caption{Computerspiel veröffentlichungen auf Steam über die Jahre}
  \label{SteamDB Statistik}
\end{figure}

Folglich kann davon ausgegangen werden, dass es Stakeholder gibt, die sich für Videospiele interessieren.



\section{Entscheidungssysteme in der Game AI}

In der Funktionalität von Entscheidungssystemen wie Behavior Trees (BT), Finite State Machines (FSM) und Goal-Oriented Action Planning (GOAP) wurde bereits eingehend auf deren Grundlagen eingegangen. Das folgende Kapitel widmet sich nun der praktischen Anwendung dieser drei Systeme sowie fortschrittlicher Methoden des maschinellen Lernens in der modernen Videospielentwicklung und Forschung.

Es muss angemerkt werden, dass es nicht das eine beste Entscheidungssystem gibt. Im Grundlagenkapitel Game-AI wurde bereits erläutert, dass es abseits der Entscheidungssysteme weitere Komponenten gibt, welche die Immersion des NPC beeinflussen. Faktoren wie die Aktionen, die ein NPC ausführt, die Wahrnehmung der Spielwelt durch den NPC oder die Navigation zu einer bestimmten Koordinate tragen zur Immersion bei. Ein Entscheidungssystem soll dabei logische Aktionen des NPC in seinem derzeitigen Zustand wählen. Je nachvollziehbarer diese Aktionen sind, desto stärker ist die Immersion.

Videospielentwickler verwenden für ihre NPCs oft nicht nur ein einzelnes Entscheidungssystem. So nutzten die Videospielentwickler des Action-Rollenspiel \textit{Final Fantasy XV (2016)} ein Entscheidungssystem, das sowohl BTs als auch FSMs integriert \textit{(AI Graph Editor)}. Dies zeigt, dass die Kombination mehrerer Entscheidungssysteme eine sinnvolle Alternative darstellen kann.

So werden in Foren bis heute diskutiert, welche Videospiele mit ihrer Game-AI hervorstechen. Besonders werden Videospiele gelobt, welche GOAP als Entscheidungssystem umgesetzt haben. Zu diesen Spielen gehören unter anderem \textit{F.E.A.R. (2005)} und \textit{S.T.A.L.K.E.R. (2007)}.
In Online Artikeln wie \autocite{vanceai}, \autocite{techopedia} und \autocite{gamerant} werden beide Titel weiterhin als Beispiele für herausragende Game-AI genannt. Sie stehen trotz ihren Alters dabei in einer Reihe mit aktuelleren Spielen, wie \textit{Alien Isolation (2014)} oder \textit{The Last of Us (2013)}.
Angemerkt sein noch, dass es schwierig zu sagen ist, welche Entscheidungssysteme aktuell in Videospielen eingesetzt werden. Videospieleentwickler geben selten detaillierte Informationen über die von ihnen verwendeten Entscheidungssysteme. Die Tabelle X soll dabei einige bekanntere Videospiele und ihre Entscheidungssysteme darstellen.


\subsection{Fortschrittliche Methoden des maschinellen Lernens}

Der Trend von fortschrittliche Methoden des maschinellen Lernens, hat an Bedeutung gewonnen. Die Methoden spielen zwar eine immer größere Rolle im alltäglichen Leben, haben jedoch einen eher geringeren Einfluss im Bereich der Game AI. Diese Methoden erfordern große Mengen an Daten für das Training und es ist äußerst schwierig, sie auf unvorhergesehene Situationen, wie in Videospielen, zu testen. \autocite{U2023}

Es existieren wenige veröffentlichten Studien, die ihre Anwendung als Entscheidungssystem für NPC dokumentieren, \autocite{U2023} daher werden diese nicht weit erläutert. Dennoch gibt es Videospiele, welche diese Methoden für bestimmte Funktionen von NPC verwendet werden und in den folgenden Abschnitten erläutert werden. Es wäre interessant diese Methoden ausführlicher in der akademischen Forschung Richtung Game AI zu sehen, insbesondere in Richtung Entscheidungssysteme.

Die Methoden des maschinellen Lernens kann man in supervised learning (SL), unsupervised learning (UL) und reinforcment learning(RL) unterteilen. So bekommt SL gelabelte Daten und UL Rohdaten mit denen sie trainieren. Während RL auf Basis der Umgebung lernt und durch richtige Aktionen belohnt wird. So wird Deep Learning, ein Teil von SL, für Spracherkennung und natural language processing benutzt. Im Strategiespiel StarCraft wird RL für das \textit{micromanagement} der NPC benutzt. \autocite{inbook}

Die Evolutionäre-Algorithmen sind inspiriert durch Darwins Theorie der Evolution. Sie optimieren dabei eine Population, wo jedes Individuum eine Lösung repräsentiert und mit einer Fitness-Wert gekennzeichnet ist. Durch Iterationen finden Selektionen und Mutationen in der Population statt, welche den Fitness-Wert der optimalen Lösung erhöhen. Im Bereich der Videospielentwicklung optimierte der Algorithmus beispielsweise die Baureihenfolge der NPC im Strategiespiel StarCraft. \autocite{inbook}


\subsection{Finite State Machines}

In den frühen Tagen der Spielentwicklung waren FSM ausreichend, um eine Entscheidungsfindung für NPC bereitzustellen. So wurde bereits im Grundlagenkapitel das Videospiel \textit{Half-Life (1998)} erwähnt. Auch abseits des FPS-Genre wurde die FSM verwendet. 2D-Videospiele wie Pac-Man und Sonic nutzten FSM, um das Verhalten ihrer NPC zu definieren. \autocite{U2023}

Die Umsetzung einer FSM wird oft als Einstieg in die Entscheidungssysteme der Game-AI empfohlen. Sie sind die am häufigsten verwendete Methode zur Entscheidungsfindung, bei NPC mit geringer Komplexität. Bis heute machen sie den Großteil der in Spielen eingesetzten Entscheidungssysteme aus \autocite{AIgames}.

Bei komplexen Videospielen wird öfter eine Hierarchical State Machine (HFSM) umgesetzt. Es handelt sich dabei um eine Erweiterung der FSM. Eine HFSM bietet im Gegensatz zur FSM die Möglichkeit, Zustände zu verschachteln und Hierarchien zwischen Zuständen zu definieren. Dies bietet den Vorteil eine bessere Übersicht über die Zustände zu haben, vor allem bei komplexen NPC. \autocite{AIgames}


\subsection{Behavior Trees}

BT sind in den Vordergrund der Game-AI gerückt. So bieten sie einen intuitiveren Ansatz als frühere Techniken wie FSM, die oft komplexe Datenstrukturen erforderten die bei einer Vergrößerung einen schlecht strukturierten Code erzeugen \autocite{qlbt}. Im Kapitel wurden bereits die Videospiele \textit{Alien Isolation (2014)} und \textit{The Last of Us (2013)} als erfolgreiche Titel in Richtung Game-AI beschrieben. Beide Titel setzen den BT als Entscheidungssystem um. Der BT wurde mit dem Videospiel Titel \textit{Halo 2 (2004)} eingeführt.

Schaut man sich Studien bezüglich Entscheidungssysteme an, so kann man den Behavior Tree als Trend erkennen. So besitzt das BT-System aktuellere Studien, auch außerhalb der Videospielentwicklung wie \autocite{btuav} und \autocite{8963263}. Studien, wie \autocite{rbt} und \autocite{qlbt}, beschäftigen sich mit dem Einsatz des maschinellen Lernens, um einen Behavior Tree zu optimalisieren. So kann das {QL-BT} System \autocite{qlbt} mittels RL ein BT optimalisiert werden, indem es die Knoten eines Baumes reorganisiert. Das System soll unter anderem ein BT simplifizieren und Code Duplikationen reduzieren.

% Tabelle hinzufügen
%Games:
%Driver, Spore\autocite{qlbt}

\subsection{GOAP}

Im Vergleich zu Behavior Trees ist der Forschungsstand zu GOAP im Bereich der Game-AI weniger umfangreich. Dennoch existieren Studien, die Ansätze zur Nutzung von GOAP beschreiben. So wurde in \autocite{Schwab2021} eine Methode beschrieben, die mittels GOAP ein Behavior Tree konstruiert. Da das manuelle Erstellen von BTs eine aufwendige und stark parameterabhängige Aufgabe darstellt, bietet die automatische Konstruktion eine Alternative. Diese Methode beobachtet zunächst das Verhalten, das GOAP in einer Monte-Carlo-Simulation zeigt, und nutzt anschließend einen genetischen Algorithmus, um einen geeigneten Behavior Tree zu entwickeln. Die resultierenden Behavior Trees zeichnen sich dadurch aus, dass sie verständlich, anpassbar und ebenso leistungsfähig wie manuell erstellte Modelle sind. \autocite{Schwab2021}

Im Bereich der Videospielentwicklung scheint das GOAP System in den Hintergrund gerückt zu sein. Das letzte bekannte Videospiel, welches GOAP umgesetzt hat war \textit{Deus Ex: human revolution (2011)}. Derzeit gibt es einen Mangel an Bibliotheken, die auch unabhängigen Videospielentwicklern zur Verfügung stehen und GOAP Systeme beinhalten. Studien wie \autocite{sielicki2018adaptation} fordern mehr Bibliotheken in Richtung \textit{Goal oriented action planning} Systeme. So hat die Studie selbst das GOAP System in der Game-Engine \textit{Unreal Engine} umgesetzt.


\begin{table}[h]
  \caption{Videospiele und ihre Entscheidungssysteme}
  \label{Videospiele und ihre Entscheidungssysteme}
  \renewcommand{\arraystretch}{1.2}
  \centering
  \small
    \begin{tabularx}{0.95\textwidth}{L R R R R R}
      \toprule
      \textbf{Videospiel} & \textbf{Entscheidungs-system} & \textbf{Genre} & \textbf{Studio} & \textbf{Erscheinungsjahr} & \textbf{Quelle} \\
      \toprule
      Driver: San Francisco&BT&Rennspiel&Ubisoft&2011&\autocite{Ocio2021}&
			Spore&BT&Strategie&Maxis&2008&\autocite{spore}&
			Halo 2&BT&FPS&Bungie&2004&&
			Tomb Raider&GOAP&Eidos Montreal&2013&\autocite{goap_gdc}&
			Half-Life&FSM&FPS&Valve&1998&\autocite{halflife}&
			S.T.A.L.K.E.R.: shadow of Chernobyl&GOAP&FPS&GSC Game World&2007&&
			No one lives forever 2&FSM&FPS&Monolith&2002&\autocite{fear}&
			F.E.A.R&GOAP&FPS&Monolith&2005&\autocite{fear}&
      \bottomrule
    \end{tabularx}
\end{table}
%S.W.A.T. 4&GOAP&FPS&Irrational Games&2005&&
%Deus Ex: Human Revolution&GOAP&FPS&Eidos Montreal&2011&&

